# Метод opskarta: «оперативная карта» как артефакт

Этот документ описывает *практику*, ради которой существует формат opskarta.

## Контекст

В реальном проекте “истина” обычно размазана:

- **Jira** хранит задачи, статусы, исполнителей, комментарии — но структура программы часто расползается между несколькими проектами/досками/эпиками.
- **Confluence** хранит договорённости — но быстро устаревает и плохо диффается.
- **Таблички** помогают “свести картинку”, но трудно поддерживаются, не масштабируются по связям и ломаются при параллельных правках.
- **Голова менеджера** становится “единственным интегратором”, а значит — single point of failure.

При этом менеджер обязан уметь отвечать на вопросы типа:

- «Какие треки существуют и как они связаны?»
- «Что блокирует что?»
- «Какие этапы критичны?»
- «Как выглядит план на уровне команд / на уровне релизов / на уровне конкретной фичи?»
- «Где у нас риски и неполные участки карты?»

## Главный принцип

**opskarta — это не “система учёта задач”. Это *карта*, которая живёт рядом с системами учёта.**

- Jira (или аналог) — это *система деталей*.
- opskarta — это *система структуры и смысла* (твоя личная интерпретация).

Это специально сделано так, чтобы:

- ты мог вести *черновики*, гипотезы и “скелеты будущих эпиков” без обязаловки заводить их в Jira прямо сейчас;
- ты мог менять структуру “в одном месте”, получая дифф и историю изменений;
- ты мог показывать разные представления разным аудиториям, не пересобирая картинку вручную.

## Что такое «оперативная карта» в opskarta

Оперативная карта = **граф работ**, где у каждой работы есть:

- **ID** (стабильный, машиночитаемый)
- **Название**
- **Тип** (summary/phase/epic/task/… — семантика, полезная для визуализаций)
- **Статус** (не обязательно синхронный с Jira)
- **Иерархия** (*parent* — “структура/разбиение”)
- **Зависимости** (*after/depends_on* — “что должно быть до чего”)
- **Плановые атрибуты** (start/duration и т.п. — опционально)
- **Заметки/контекст** (notes, ссылки, теги — опционально)
- **Ссылка на систему деталей** (issue: ключ Jira/YouTrack/URL — опционально)

Карта хранится как обычный текстовый файл (YAML/JSON) и поэтому:

- легко хранится в Git;
- хорошо диффается;
- поддерживает ветки (альтернативные планы, сценарии, “что если”);
- позволяет тебе быть “автором структуры”, не завися от миграций и политики инструментов.

## Почему отдельный файл представлений (views)

Людям почти никогда не нужен весь граф сразу. Нужны *срезы*:

- «все команды, верхний уровень»
- «только один трек, но глубже»
- «только критические зависимости»
- «только то, что идёт в релиз R»
- «только блокеры»

Поэтому opskarta предлагает отделять:

- **модель (plan)** — *что существует*,
- **представления (views)** — *как смотреть*.

Это позволяет держать **одну “истину менеджера”** и много рендеров.

## Типичный рабочий цикл

1. Ты фиксируешь структуру в `*.plan.yaml`:
   - добавляешь узлы, даже если в Jira ещё ничего не заведено;
   - связываешь их родителями и зависимостями;
   - прикидываешь этапы и длительности там, где это полезно.

2. Ты описываешь 2–10 “вьюх” в `*.views.yaml`:
   - под синхронизацию со стейкхолдерами;
   - под ежедневную работу;
   - под ревью рисков;
   - под планирование релиза.

3. Генерируешь артефакты:
   - Mermaid Gantt / Mermaid flowchart
   - SVG/PNG (через рендереры)
   - Markdown‑отчёты
   - CSV для табличек
   - что угодно ещё

4. При желании подключаешь интеграции:
   - синхронизатор статусов из Jira;
   - генератор “missing steps” через LLM;
   - сборщик метрик (сколько блокеров, сколько неподвязанных узлов);
   - и т.д.

## Что opskarta принципиально НЕ делает

Чтобы практику не убило собственное величие, opskarta *сознательно* не закрывает:

- “Единое место работы для команды” — это всё равно Jira/Linear/…  
  opskarta — про картину менеджера, а не про то, где люди ставят галочки.
- Конфликт‑резолвинг между несколькими авторами “в реальном времени”.
- Управление доступами и процессами.
- Автоматическое планирование “как в MS Project”.
- Гарантию согласованности с системами деталей:  
  допускается, что карта и Jira временно расходятся. Это нормально и честно.

## Смысл open spec

Формат задуман как **открытая модель данных**, чтобы:

- разные люди могли делать разные генераторы/рендереры;
- интеграторы могли писать синхронизаторы с любыми системами;
- можно было подключать LLM‑инструменты без завязки на конкретную платформу.

Иначе говоря: **opskarta — это ворота. А что за ними построят — решит сообщество.**
