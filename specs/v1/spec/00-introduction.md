# Спецификация opskarta v1 (черновик)

Эта спецификация описывает *минимальный* совместимый набор полей формата opskarta.

- Формат сериализации: **YAML** (рекомендовано) или JSON.
- Версионирование: поле `version` в корне документа.
- Идентификаторы узлов: строковые ключи в мапе `nodes:`.

> Статус: **Draft**. Спека намеренно стартует маленькой и расширяемой.

## Core vs Non-core

Спецификация различает **core** (нормативные) и **non-core** (информативные/расширения) части:

| Категория | Описание | Обязательность для инструментов |
|-----------|----------|--------------------------------|
| **Core** | Базовая семантика формата, алгоритмы планирования, правила валидации | MUST implement |
| **Non-core** | Расширения (`x:` namespace), renderer profiles, дополнительные поля представлений | MAY implement |

### Core-компоненты

- Структура файлов `*.plan.yaml` и `*.views.yaml`
- Поля узлов: `title`, `kind`, `status`, `parent`, `after`, `start`, `duration`, `milestone`
- Вычисление дат: `finish`, `start from after`
- Исключения календаря: `"weekends"` в `excludes`
- Значение по умолчанию: `duration = 1d` для планируемых узлов
- Правила валидации и ссылочной целостности

### Non-core компоненты

- Расширения через `x:` namespace (например, `x.scheduling.anchor_to_parent_start`)
- Renderer profiles (Mermaid Gantt, другие)
- Поля представлений для конкретных рендереров (`date_format`, `axis_format`, `tick_interval`)
- Конкретные даты в `excludes` (передаются рендереру, но не влияют на core-алгоритм)
- Цвета статусов по умолчанию
