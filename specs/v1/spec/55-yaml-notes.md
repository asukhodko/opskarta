# Рекомендации по кодированию YAML

Формат opskarta использует YAML (рекомендуется) или JSON для сериализации. В этом разделе описаны рекомендации по корректному кодированию данных в YAML.

## Даты (поле `start`)

YAML-парсеры могут автоматически преобразовывать строки, похожие на даты, в специальные типы. Чтобы избежать проблем, рекомендуется заключать даты в кавычки.

### Рекомендуемый формат

```yaml
nodes:
  task1:
    title: "Задача"
    start: "2024-03-15"  # Строка в кавычках (рекомендуется)
    duration: "5d"
```

### Потенциально проблемный формат

```yaml
nodes:
  task1:
    title: "Задача"
    start: 2024-03-15  # Без кавычек — может быть интерпретировано как дата или число
    duration: 5d       # Без кавычек — может вызвать ошибку парсинга
```

## Длительность (поле `duration`)

Значение `duration` ДОЛЖНО быть строкой в формате `<число><единица>` (например, `5d`, `2w`).

### Корректные примеры

```yaml
duration: "5d"   # 5 дней
duration: "2w"   # 2 недели (= 10 рабочих дней)
duration: "10d"  # 10 дней
```

### Некорректные примеры

```yaml
duration: 5d     # Без кавычек — может вызвать ошибку парсинга YAML
duration: 5      # Число без единицы — не соответствует формату
duration: "0d"   # Ноль недопустим
duration: "-1d"  # Отрицательные значения недопустимы
```

## Эквивалентность YAML и JSON

Форматы YAML и JSON полностью взаимозаменяемы. Ниже приведены эквивалентные примеры.

### YAML

```yaml
version: 1
meta:
  id: "my-project"
  title: "Мой проект"
nodes:
  task1:
    title: "Первая задача"
    start: "2024-03-01"
    duration: "5d"
  task2:
    title: "Вторая задача"
    after:
      - task1
    duration: "3d"
```

### JSON (эквивалент)

```json
{
  "version": 1,
  "meta": {
    "id": "my-project",
    "title": "Мой проект"
  },
  "nodes": {
    "task1": {
      "title": "Первая задача",
      "start": "2024-03-01",
      "duration": "5d"
    },
    "task2": {
      "title": "Вторая задача",
      "after": ["task1"],
      "duration": "3d"
    }
  }
}
```

## Многострочные строки (поле `notes`)

Для многострочных заметок используйте литеральный блок (`|`) или свёрнутый блок (`>`):

### Литеральный блок (сохраняет переводы строк)

```yaml
nodes:
  task1:
    title: "Задача с заметками"
    notes: |
      Первая строка заметки.
      Вторая строка заметки.
      
      Абзац после пустой строки.
```

### Свёрнутый блок (объединяет строки)

```yaml
nodes:
  task1:
    title: "Задача с заметками"
    notes: >
      Это длинная заметка, которая
      будет объединена в одну строку
      с пробелами между частями.
```

## Специальные символы

При использовании специальных символов в строках заключайте их в кавычки:

```yaml
nodes:
  task1:
    title: "Задача: важная!"      # Двоеточие требует кавычек
    issue: "JIRA-123"             # Без проблем
    notes: "Заметка с # символом" # Решётка требует кавычек
```
