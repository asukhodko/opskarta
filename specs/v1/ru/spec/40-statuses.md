# Статусы (`statuses`)

`statuses` — словарь произвольных статусов, которые понимает твой набор инструментов.

## Структура

Секция `statuses` в файле плана является **опциональной**. Однако, если хотя бы один узел имеет поле `status`, секция `statuses` становится обязательной.

### Правило ссылочной целостности

Если узел имеет поле `status`, значение ДОЛЖНО быть ключом из словаря `statuses`:

```yaml
statuses:
  done: { label: "Готово" }
  in_progress: { label: "В работе" }

nodes:
  task1:
    title: "Задача"
    status: done          # ✓ корректно
  task2:
    title: "Другая задача"
    status: pending       # ✗ ошибка: pending нет в statuses
```

## Рекомендованные ключи статусов

Следующие ключи не обязательны, но помогают совместимости между инструментами:

- `not_started`
- `in_progress`
- `done`
- `blocked`

## Поля статуса

Каждый статус — объект со следующими полями:

| Поле | Тип | Обязательность | Описание |
|------|-----|----------------|----------|
| `label` | string | Рекомендуется | Человекочитаемое имя статуса |
| `color` | string | Опционально | Цвет в hex-формате для визуализаций |

### Поле `label`

- Если `label` не указан, рендереры МОГУТ использовать ключ статуса как label.

### Поле `color`

- Формат: hex-цвет, регулярное выражение `^#[0-9a-fA-F]{6}$`.
- Примеры: `#22c55e`, `#9ca3af`, `#fecaca`.
- Если `color` не указан, рендереры МОГУТ использовать цвета по умолчанию (см. Renderer profile).

```yaml
# Корректные цвета
color: "#22c55e"
color: "#9CA3AF"

# Некорректные цвета
color: "green"      # Именованные цвета не поддерживаются
color: "#fff"       # Должен быть 6-символьный hex
color: "22c55e"     # Должен начинаться с #
```

## Пример

### Минимальный

```yaml
statuses:
  done: { label: "Готово" }
  in_progress: { label: "В работе" }
```

### Полный

```yaml
statuses:
  not_started:
    label: "Не начато"
    color: "#9ca3af"
  in_progress:
    label: "В работе"
    color: "#0ea5e9"
  done:
    label: "Готово"
    color: "#22c55e"
  blocked:
    label: "Заблокировано"
    color: "#fecaca"
```
