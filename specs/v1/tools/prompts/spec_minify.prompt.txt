You are a deterministic "specification compressor". Your task: compress the full opskarta v1 specification into a compact version for LLM prompt insertion, without losing semantics.

INPUT:
- Read the full specification file: specs/v1/en/SPEC.md.
- The full spec is the single source of truth. DO NOT use external knowledge, guesses, or web search.

OUTPUT (MANDATORY):
- Output to stdout ONLY the text of the compressed specification.
- No explanations, comments, introductions, "I did...", checklists, meta-text.
- DO NOT use triple backticks (```) to avoid inflating tokens when copy-pasting.
- Language: English, but keep normative markers MUST/SHOULD/MAY as in the original (if present).
- Format: strictly follow the template below (with the same headings/numbering). DO NOT change section order.

COMPRESSION CONSTRAINTS/GOALS:
- Remove examples/tables/repetitions/long explanations. Keep definitions, invariants, formulas, regexes, priorities, validation rules, "edge cases".
- If in doubt whether a piece can be removed — DO NOT remove it.
- Do not "improve" or "rephrase meaning". Compress text, but don't change rules.
- If the source spec has a contradiction/ambiguity and you cannot guarantee identical interpretation: output the line
  ERROR: ambiguous source spec at <section/topic>
  and NOTHING else.

MANDATORY COVERAGE (must be present in compressed text):
A) Core vs non-core: what MUST implement and what MAY.
B) File structures: plan (*.plan.yaml) and views (*.views.yaml), their root fields.
C) Nodes: node_id requirements; required title; fields kind/status/parent/after/start/finish/duration/milestone/issue/notes.
D) Milestone rules (including start from after without +1 day; duration=1d if not specified for scheduled).
E) Statuses: when required; referential integrity; label/color and regex for color.
F) Scheduling per-view: calendar(view), workday, core-excludes ("weekends", YYYY-MM-DD), non-core excludes = ignore+WARN.
G) duration format and semantics (Nd workdays; Nw=5*N workdays; regex ^[1-9][0-9]*[dw]$); default duration=1d for scheduled.
H) finish inclusive; formulas finish_from_start, start_from_finish; duration_from_dates.
I) after: start from after (regular node = next_workday(max_finish); milestone = max_finish); start priority over after; WARN when start < finish(deps).
J) Normalization of start on excluded day (except milestone) + WARN; finish on excluded day = WARN, no normalization (except milestone).
K) Unscheduled: definition + core rule "don't show on Gantt".
L) IMPORTANT anti-ambiguity:
   - If finish+duration are specified and start is absent, start is computed FROM finish (start_from_finish) even if after exists; after in this case doesn't shift dates, only logic/possible WARN.
   - finish without start and without duration doesn't define timeline position (node may remain unscheduled).
M) Rule: when calculating view, after dependencies MUST consider ALL plan nodes, even if not shown in current view.
N) Migration end(exclusive) → finish(inclusive): finish = prev_workday(end_exclusive, calendar(view)).
O) YAML/JSON: YAML 1.1 auto-typing of dates; normalization of start/finish/excludes to "YYYY-MM-DD"; nodes keys are strings; duration is string.
P) Validation: error/warn/info; list of typical errors/warnings; views.project==plan.meta.id relation; lanes nodes must exist.
Q) Extensibility: unknown fields ignore + preserve parse→emit; namespace x: recommended; where to extend.
R) Renderer profile Mermaid Gantt (non-core): precompute core schedule, explicit dates; pass only core excludes; w→d; lanes→section; parent flat; milestone mapping; status mapping; default colors; x.scheduling.anchor_to_parent_start semantics; view fields date_format/axis_format/tick_interval (non-core).

OUTPUT TEMPLATE (fill with content, but don't change structure/numbering):

opskarta v1 (draft) — ultra-compact spec (LLM-paste), core-complete + anti-ambiguity

0) General
- ...

1) *.plan.yaml (plan)
- ...

2) nodes.* (nodes)
- ...

3) statuses
- ...

4) *.views.yaml (views)
- ...

5) Scheduling (core) — per-view
- ...

6) Migration from end(exclusive)
- ...

7) YAML/JSON types and normalization (core)
- ...

8) Validation (core) + severity
- ...

9) Extensibility (core-compatible)
- ...

10) Renderer profile: Mermaid Gantt (non-core, reference)
- ...
